{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\Compressed\\\\file-manager-auth-mern-master\\\\file-manager-auth-mern-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\Compressed\\\\file-manager-auth-mern-master\\\\file-manager-auth-mern-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\Compressed\\\\file-manager-auth-mern-master\\\\file-manager-auth-mern-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\Compressed\\\\file-manager-auth-mern-master\\\\file-manager-auth-mern-master\\\\client\\\\src\\\\components\\\\FileAccess\\\\index.jsx\";\nimport React, { useState } from 'react';\nexport default function Index(props) {\n  var _this = this;\n\n  var _props$file = props.file,\n      id = _props$file.id,\n      shared = _props$file.shared;\n  var arr = [];\n\n  var _loop = function _loop(i) {\n    arr.push( /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 14\n      }\n    }, shared[i], /*#__PURE__*/React.createElement(\"button\", {\n      onClick: function onClick() {\n        return deleteClick(id, shared[i]);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 30\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      \"aria-hidden\": \"true\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 81\n      }\n    }))));\n  };\n\n  for (var i = 0; i < shared.length; i++) {\n    _loop(i);\n  }\n\n  var _useState = useState(arr),\n      _useState2 = _slicedToArray(_useState, 2),\n      sharedUsers = _useState2[0],\n      setSharedUsers = _useState2[1];\n\n  function deleteClick(fileId, userEmail) {\n    var _this2 = this;\n\n    //alert(\"Delete Clicked!\");\n    console.log(\"Delete Clicked!\"); //console.log(e);\n\n    fetch(\"/api/files/share/delete\", {\n      method: \"DELETE\",\n      body: JSON.stringify({\n        fileId: fileId,\n        userEmail: userEmail\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(res.status === 200)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.delegateYield( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  var data, arr, _loop2, _i;\n\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return res.json();\n\n                        case 2:\n                          data = _context.sent;\n                          // console.log(data.shared);\n                          arr = [];\n\n                          _loop2 = function _loop2(_i) {\n                            arr.push( /*#__PURE__*/React.createElement(\"div\", {\n                              __self: _this2,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 29,\n                                columnNumber: 20\n                              }\n                            }, data.shared[_i], /*#__PURE__*/React.createElement(\"button\", {\n                              onClick: function onClick() {\n                                return deleteClick(id, data.shared[_i]);\n                              },\n                              __self: _this2,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 29,\n                                columnNumber: 41\n                              }\n                            }, /*#__PURE__*/React.createElement(\"i\", {\n                              className: \"fa fa-trash\",\n                              \"aria-hidden\": \"true\",\n                              __self: _this2,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 29,\n                                columnNumber: 97\n                              }\n                            }))));\n                          };\n\n                          for (_i = 0; _i < data.shared.length; _i++) {\n                            _loop2(_i);\n                          }\n\n                          setSharedUsers(arr);\n\n                        case 7:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })(), \"t0\", 2);\n\n              case 2:\n                _context2.next = 5;\n                break;\n\n              case 4:\n                res.text().then(function (text) {\n                  alert(\"Error please try again -\" + text);\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (err) {\n      console.log(err);\n      alert(\"Error removing a share file. Please try again\");\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"border mt-1 pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"usernames:\", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, sharedUsers)));\n}","map":{"version":3,"sources":["C:/Users/ASUS/Downloads/Compressed/file-manager-auth-mern-master/file-manager-auth-mern-master/client/src/components/FileAccess/index.jsx"],"names":["React","useState","Index","props","file","id","shared","arr","i","push","deleteClick","length","sharedUsers","setSharedUsers","fileId","userEmail","console","log","fetch","method","body","JSON","stringify","headers","then","res","status","json","data","text","alert","catch","err"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\n\nexport default function Index(props) {\n  let { id, shared } = props.file;\n  let arr = [];\n  for (let i = 0; i < shared.length; i++) {\n    arr.push(<div>{shared[i]}<button onClick={() => deleteClick(id, shared[i])}><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></button></div>);\n  }\n  const [sharedUsers, setSharedUsers] = useState(arr);\n  function deleteClick(fileId, userEmail) {\n    //alert(\"Delete Clicked!\");\n\n    console.log(\"Delete Clicked!\");\n    //console.log(e);\n\n    fetch(\"/api/files/share/delete\", {\n      method: \"DELETE\",\n      body: JSON.stringify({ fileId, userEmail }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(async res => {\n      if (res.status === 200) {\n        // props.data.showFunction();\n        const data = await res.json();\n        // console.log(data.shared);\n        let arr = [];\n        for (let i = 0; i < data.shared.length; i++) {\n          arr.push(<div>{data.shared[i]}<button onClick={() => deleteClick(id, data.shared[i])}><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></button></div>);\n        }\n        setSharedUsers(arr);\n      } else {\n        res.text().then(text => { alert(\"Error please try again -\" + text) });\n      }\n    })\n      .catch(err => {\n        console.log(err);\n        alert(\"Error removing a share file. Please try again\");\n      });\n  }\n  return (\n    <div className=\"border mt-1 pl-1\">\n      <div>usernames:\n                <div>\n          {sharedUsers}\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}